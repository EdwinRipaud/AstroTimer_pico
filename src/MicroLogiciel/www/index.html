<!--DOCTYPE html-->
<html>
    <head>
        <title>AstroTimer</title>
        <meta charset="UTF-8"/>
    <head/>
    
    <style type="text/css">
    </style>
    
    <script>
        function call_timer_api(path) {
            let xhr = new XMLHttpRequest();
            xhr.open("POST", '/api/timer/'+path, true);
            xhr.setRequestHeader("Content-Type", "text/plain");
            let text = '';
            text += `picture=${document.getElementById('picture').value}\r\n`;
            text += `exposure=${document.getElementById('exposure').value}\r\n`;
            text += `delay=${document.getElementById('delay').value}\r\n`;
            xhr.send(text);
            xhr.onloadend = function() {
                if (this.responseText == "OK") {
                    /*if (path=="start") {
                        document.getElementById("btn_startTimer").style.display = "none";
                        document.getElementById("btn_stopTimer").style.display = "block";
                    } else if (path=="stop") {
                        document.getElementById("btn_startTimer").style.display = "block";
                        document.getElementById("btn_stopTimer").style.display = "none";
                    }
                    style="display:none"*/
                }
                else
                    alert(this.responseText);
            };
        }
    </script>
    
    <body>
        <div class="main" id="main">
            <h1>Welcome to AstroTimer Webapp</h1>
            <p>Work in progress...</p>
            <div class="setting_table">
                <span>Number of picture:</span><input id="picture" value="3"/><br/>
                <span>Exposure time:</span><input id="exposure" value="2"/><span>s</span><br/>
                <span>Delay time:</span><input id="delay" value="0.5"/><span>s</span><br/>
                <button id = "btn_startTimer" onclick="call_timer_api('start')">Start</button>
                <button id = "btn_stopTimer" onclick="call_timer_api('stop')">Stop</button>
            </div>
        </div>
    </body>
</html>
